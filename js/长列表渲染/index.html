<ul id="container">

</ul>


<script>

    const container = document.getElementById('container')
    let total = 100000
    // for (let i = 0; i < total; i++) {
    //     let li = document.createElement('li')
    //     li.innerText = i
    //     container.appendChild(li)
    // }

    // 分页，懒加载（上拉加载）  分段渲染页面

    // 优化

    let once = 20
    let index = 0
    // let page = total / once
    // curTotal 当前剩余数据总数

    function page(curTotal) {
        // 如果剩余数据不足20条，则将最后所有数据一次性渲染
        if (curTotal <= 0) return
        let pageCount = Math.min(curTotal, once)
        for (let i = 0; i < pageCount; i++) {
            const li = document.createElement('li')
            li.innerText = Math.random()
            container.appendChild(li)
        }
        // 一直加载下一页
        setTimeout(() => {
            page(curTotal - pageCount)
        }, 16);                 //时间分片
    }
    page(total)



    // requestAnimationFrame
</script>